<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent Sandbox Solutions: A Comparative Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Nunito:wght@400;600;700&family=Patrick+Hand&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="static/styles.css">
    <style>
        /* Page-specific styles only - common styles are in shared CSS */

        /* Highlight */
        .highlight { background: linear-gradient(180deg, transparent 65%, rgba(255, 230, 109, 0.5) 65%); }
        .highlight-teal { background: linear-gradient(180deg, transparent 65%, rgba(78, 205, 196, 0.35) 65%); }
        .highlight-coral { background: linear-gradient(180deg, transparent 65%, rgba(255, 107, 107, 0.35) 65%); }

        /* Isolation Hierarchy */
        .isolation-hierarchy {
            background: linear-gradient(135deg, #FFF8E7, #FFECB3);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 30px;
            margin: 25px 0;
            border: 3px dashed var(--accent-orange);
        }
        .isolation-title {
            font-family: 'Patrick Hand', cursive;
            font-size: 1.3rem;
            color: var(--accent-orange);
            text-align: center;
            margin-bottom: 25px;
        }
        .isolation-levels { display: flex; flex-direction: column; gap: 12px; }
        .isolation-level {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            border: 3px solid var(--pencil);
            position: relative;
            transition: transform 0.3s;
        }
        .isolation-level:hover { transform: translateX(5px); }
        .isolation-icon {
            width: 50px;
            height: 50px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            flex-shrink: 0;
            border: 2px solid var(--pencil);
        }
        .isolation-icon.vm { background: #E8F8F5; color: var(--accent-teal); }
        .isolation-icon.kernel { background: #E3F2FD; color: #2196F3; }
        .isolation-icon.container { background: #FFF3E0; color: var(--accent-orange); }
        .isolation-icon.process { background: #FCE4EC; color: #E91E63; }
        .isolation-icon.language { background: #E8EAF6; color: #3F51B5; }
        .isolation-level.vm { background: linear-gradient(135deg, #E8F8F5, #D1F2EB); margin-left: 0; }
        .isolation-level.kernel { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); margin-left: 20px; }
        .isolation-level.container { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); margin-left: 40px; }
        .isolation-level.process { background: linear-gradient(135deg, #FCE4EC, #F8BBD9); margin-left: 60px; }
        .isolation-level.language { background: linear-gradient(135deg, #E8EAF6, #C5CAE9); margin-left: 80px; }

        /* Architecture Diagrams */
        .arch-diagram {
            background: linear-gradient(135deg, #F8F9FA, #F0F0F0);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 25px;
            margin: 25px 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
            border: 3px dashed var(--pencil);
        }
        .arch-layer {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            font-family: 'Patrick Hand', cursive;
            font-size: 1.05rem;
            border: 3px solid var(--pencil);
            transition: transform 0.3s;
        }
        .arch-layer:hover { transform: scale(1.02) rotate(-1deg); }
        .arch-layer.host { background: linear-gradient(135deg, #ECEFF1, #CFD8DC); }
        .arch-layer.hypervisor { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); }
        .arch-layer.kernel { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); }
        .arch-layer.container { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); }
        .arch-layer.app { background: linear-gradient(135deg, #FCE4EC, #F8BBD9); }
        .arch-layer.sandbox { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-color: var(--accent-teal); }

        /* Comparison Cards */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .comparison-card {
            background: var(--bg-paper);
            border: 3px solid var(--pencil);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 25px;
            transition: all 0.3s;
        }
        .comparison-card:hover { transform: translateY(-5px); box-shadow: 5px 6px 0 rgba(0,0,0,0.15); }
        .comparison-card h3 { font-family: 'Patrick Hand', cursive; font-size: 1.4rem; margin-bottom: 15px; color: var(--pencil); }
        .comparison-card ul { list-style: none; padding: 0; margin: 0; }
        .comparison-card li { padding: 8px 0; border-bottom: 2px dashed rgba(0,0,0,0.1); display: flex; align-items: center; gap: 10px; font-size: 0.95rem; }
        .comparison-card li:last-child { border-bottom: none; }
        .comparison-card .pro { color: var(--accent-teal); }
        .comparison-card .con { color: var(--accent-coral); }

        /* Pros Cons Box */
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .pros-box {
            background: linear-gradient(135deg, #E8F8F5, #D1F2EB);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 20px;
            border: 3px solid var(--accent-teal);
        }
        .cons-box {
            background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 20px;
            border: 3px solid var(--accent-coral);
        }
        .pros-box h4, .cons-box h4 {
            font-family: 'Patrick Hand', cursive;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pros-box h4 { color: var(--accent-teal); }
        .cons-box h4 { color: var(--accent-coral); }
        .pros-box ul, .cons-box ul { list-style: none; padding: 0; margin: 0; }
        .pros-box li, .cons-box li { padding: 6px 0; font-size: 0.9rem; }
        .pros-box li::before { content: '‚úì '; color: var(--accent-teal); font-weight: bold; }
        .cons-box li::before { content: '‚úó '; color: var(--accent-coral); font-weight: bold; }

        /* Metaphor Box */
        .metaphor-box {
            background: linear-gradient(135deg, #F8F5FF, #F0FFFA);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            padding: 25px;
            margin: 20px 0;
            border: 3px solid var(--pencil);
            text-align: center;
            transition: transform 0.3s;
        }
        .metaphor-box:hover { transform: scale(1.02) rotate(1deg); }
        .metaphor-icon { font-size: 3rem; margin-bottom: 12px; }
        .metaphor-label { font-family: 'Patrick Hand', cursive; font-size: 1.3rem; font-weight: 700; }
        .metaphor-desc { font-size: 0.9rem; color: var(--text-muted); }

        /* Links */
        a { color: var(--accent-teal); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* Mobile Overrides - Page Specific */
        @media (max-width: 768px) {
            .isolation-level.kernel { margin-left: 10px; }
            .isolation-level.container { margin-left: 20px; }
            .isolation-level.process { margin-left: 30px; }
            .isolation-level.language { margin-left: 40px; }
            .pros-cons { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Background doodles -->
    <div class="bg-doodle bg-doodle-1"><i class="fa-solid fa-box-open"></i></div>
    <div class="bg-doodle bg-doodle-2"><i class="fa-solid fa-shield-halved"></i></div>
    <div class="bg-doodle bg-doodle-3"><i class="fa-solid fa-server"></i></div>
    <div class="bg-doodle bg-doodle-4"><i class="fa-solid fa-lock"></i></div>
    <div class="bg-doodle bg-doodle-5"><i class="fa-solid fa-filter"></i></div>

    <button class="toc-toggle" onclick="toggleSidebar()"><i class="fa-solid fa-bars"></i></button>

    <div class="page-wrapper">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Sandbox Solutions</div>
                <div class="sidebar-subtitle">Navigation Guide</div>
            </div>

            <div class="toc-section">
                <div class="toc-title"><i class="fa-solid fa-shield-halved"></i> Overview</div>
                <ul class="toc-list">
                    <li><a href="#need-sandboxing" onclick="scrollToSection('need-sandboxing')">The Need for Sandboxing</a></li>
                    <li><a href="#isolation-hierarchy" onclick="scrollToSection('isolation-hierarchy')">Isolation Hierarchy</a></li>
                </ul>
            </div>

            <div class="toc-section">
                <div class="toc-title"><i class="fa-solid fa-server"></i> Solutions</div>
                <ul class="toc-list">
                    <li><a href="#firecracker" onclick="scrollToSection('firecracker')">Firecracker (MicroVM)</a></li>
                    <li><a href="#gvisor" onclick="scrollToSection('gvisor')">gVisor (User-Space)</a></li>
                    <li><a href="#nsjail" onclick="scrollToSection('nsjail')">nsjail (Process)</a></li>
                    <li><a href="#docker" onclick="scrollToSection('docker')">Docker with seccomp</a></li>
                    <li><a href="#restrictedpython" onclick="scrollToSection('restrictedpython')">RestrictedPython</a></li>
                </ul>
            </div>

            <div class="toc-section">
                <div class="toc-title"><i class="fa-solid fa-list-check"></i> Analysis</div>
                <ul class="toc-list">
                    <li><a href="#best-practices" onclick="scrollToSection('best-practices')">Security Best Practices</a></li>
                    <li><a href="#comparison" onclick="scrollToSection('comparison')">Comparative Analysis</a></li>
                    <li><a href="#recommendation" onclick="scrollToSection('recommendation')">Recommendation</a></li>
                    <li><a href="#conclusion" onclick="scrollToSection('conclusion')">Conclusion</a></li>
                </ul>
            </div>

            <div class="toc-section" style="margin-top: 30px; padding-top: 20px; border-top: 2px dashed rgba(0,0,0,0.1);">
                <a href="index.html" style="display: flex; align-items: center; gap: 8px; color: var(--accent-teal); text-decoration: none; font-weight: 600;">
                    <i class="fa-solid fa-arrow-left"></i> Back to Home
                </a>
            </div>
        </nav>

        <main class="main-content">
            <div class="container">
                <a href="index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Back to Mind & Machine</a>
            
                <div class="page-meta">
                    <span><i class="fa-solid fa-user"></i> Jiuhe Wang</span>
                    <span><i class="fa-regular fa-calendar"></i> Feb 21, 2025</span>
                </div>

                <header>
                    <h1>AI Agent Sandbox Solutions</h1>
                    <p class="subtitle">A Comparative Analysis for Secure Agentic AI Workflows</p>
                </header>

                <!-- Introduction -->
                <section class="card reveal" id="need-sandboxing">
            <h2><i class="fa-solid fa-shield-halved fa-icon"></i>The Need for Sandboxing</h2>
            
            <p>Agentic AI systems, capable of autonomous code execution, present <span class="highlight-coral">unique security challenges</span>. Their ability to generate and execute code on the fly increases the risk of system compromise, data exfiltration, and privilege escalation.</p>
            
            <p>Sandboxing is thus a <span class="highlight">critical control</span>, providing isolation between the agent and the host environment, limiting the blast radius of potential exploits, and enabling safe experimentation and deployment of AI-driven automation.</p>
            
            <div class="quote-box">
                <strong>Key Principle:</strong> The stronger the isolation, the safer your agentic workflows. Choose your sandbox based on your threat model, not just convenience.
            </div>
        </section>

        <!-- Isolation Hierarchy -->
        <section class="card reveal" id="isolation-hierarchy">
            <h2><i class="fa-solid fa-layer-group fa-icon"></i>Isolation Hierarchy</h2>
            
            <p>Understanding the <span class="highlight-teal">isolation boundaries</span> is crucial for selecting the right sandbox solution. Each level provides different security guarantees:</p>

            <div class="isolation-hierarchy">
                <div class="isolation-title"><i class="fa-solid fa-chess-rook"></i> From Strongest to Weakest Isolation</div>
                
                <div class="isolation-levels">
                    <div class="isolation-level vm">
                        <div class="isolation-icon vm"><i class="fa-solid fa-server"></i></div>
                        <div class="isolation-info">
                            <div class="isolation-name">VM-Level (Hardware Virtualization)</div>
                            <div class="isolation-desc">Complete hardware isolation ‚Ä¢ Separate kernel ‚Ä¢ Strongest boundary</div>
                        </div>
                        <span class="isolation-strength">üîí Maximum</span>
                    </div>

                    <div class="isolation-level kernel">
                        <div class="isolation-icon kernel"><i class="fa-solid fa-glasses"></i></div>
                        <div class="isolation-info">
                            <div class="isolation-name">User-Space Kernel (gVisor)</div>
                            <div class="isolation-desc">Syscall interception ‚Ä¢ User-space implementation ‚Ä¢ High compatibility</div>
                        </div>
                        <span class="isolation-strength">üõ°Ô∏è High</span>
                    </div>

                    <div class="isolation-level container">
                        <div class="isolation-icon container"><i class="fa-solid fa-box-open"></i></div>
                        <div class="isolation-info">
                            <div class="isolation-name">Container + Namespace (nsjail, Docker)</div>
                            <div class="isolation-desc">OS-level virtualization ‚Ä¢ Shared kernel ‚Ä¢ Process isolation</div>
                        </div>
                        <span class="isolation-strength">üõ°Ô∏è Medium</span>
                    </div>

                    <div class="isolation-level process">
                        <div class="isolation-icon process"><i class="fa-solid fa-gears"></i></div>
                        <div class="isolation-info">
                            <div class="isolation-name">Process-Level (seccomp, cgroups)</div>
                            <div class="isolation-desc">Syscall filtering ‚Ä¢ Resource limits ‚Ä¢ Same user space</div>
                        </div>
                        <span class="isolation-strength">üîì Low</span>
                    </div>

                    <div class="isolation-level language">
                        <div class="isolation-icon language"><i class="fa-brands fa-python"></i></div>
                        <div class="isolation-info">
                            <div class="isolation-name">Language-Level (RestrictedPython)</div>
                            <div class="isolation-desc">Interpreter restrictions ‚Ä¢ Python-only ‚Ä¢ Easily bypassed</div>
                        </div>
                        <span class="isolation-strength">‚ö†Ô∏è Minimal</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Solution Cards with Diagrams -->
        <section class="card reveal" id="firecracker">
            <h2><i class="fa-solid fa-fire fa-icon"></i>Firecracker (MicroVM)</h2>
            
            <div class="solution-header">
                <div class="solution-icon" style="background: var(--accent-green); color: white;"><i class="fa-solid fa-fire"></i></div>
                <div>
                    <div class="solution-title">VM-Level Isolation</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">AWS MicroVM Monitor ‚Ä¢ &lt;125ms startup ‚Ä¢ Thousands per host</div>
                </div>
            </div>

            <div class="arch-diagram">
                <div class="arch-layer host">
                    <div class="layer-icon"><i class="fa-solid fa-server"></i></div>
                    <div class="layer-label">Host Hardware</div>
                    <div class="layer-detail">Physical Machine</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer hypervisor">
                    <div class="layer-icon" style="color: var(--accent-green);"><i class="fa-solid fa-shield-halved"></i></div>
                    <div class="layer-label">Firecracker VMM</div>
                    <div class="layer-detail">Minimal device model ‚Ä¢ KVM</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer kernel">
                    <div class="layer-icon" style="color: #2196F3;"><i class="fa-brands fa-linux"></i></div>
                    <div class="layer-label">Guest Kernel</div>
                    <div class="layer-detail">Isolated OS instance</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: var(--accent-coral);"><i class="fa-solid fa-robot"></i></div>
                    <div class="layer-label">AI Agent Code</div>
                    <div class="layer-detail">Sandboxed execution</div>
                </div>
            </div>

            <p>An open-source microVM monitor from AWS, designed for secure, lightweight workload isolation. Provides VM-level isolation with minimal device models, reducing attack surface compared to traditional hypervisors. Enables rapid microVM startup and supports running thousands of microVMs per host.</p>

            <div class="strength-meter">
                <span class="strength-label">Isolation:</span>
                <div class="strength-bar"><div class="strength-fill high"></div></div>
                <span class="strength-value">Maximum</span>
            </div>

            <p><strong>Best For:</strong> Multi-tenant, high-security, production-grade environments where strong isolation and scalability are essential.</p>
        </section>

        <section class="card reveal" id="gvisor">
            <h2><i class="fa-solid fa-glasses fa-icon"></i>gVisor (User-Space Kernel)</h2>
            
            <div class="solution-header">
                <div class="solution-icon" style="background: #2196F3; color: white;"><i class="fa-solid fa-glasses"></i></div>
                <div>
                    <div class="solution-title">Application Kernel Isolation</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Sentry component ‚Ä¢ Syscall interception ‚Ä¢ Broad compatibility</div>
                </div>
            </div>

            <div class="arch-diagram">
                <div class="arch-layer host">
                    <div class="layer-icon"><i class="fa-solid fa-server"></i></div>
                    <div class="layer-label">Host Kernel (Linux)</div>
                    <div class="layer-detail">Underlying OS</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer sandbox">
                    <div class="layer-icon" style="color: var(--accent-sunflower);"><i class="fa-solid fa-filter"></i></div>
                    <div class="layer-label">Sentry (User-Space Kernel)</div>
                    <div class="layer-detail">Intercepts & implements syscalls</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer container">
                    <div class="layer-icon" style="color: var(--accent-orange);"><i class="fa-solid fa-box"></i></div>
                    <div class="layer-label">Container</div>
                    <div class="layer-detail">Namespace isolation</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: var(--accent-coral);"><i class="fa-solid fa-robot"></i></div>
                    <div class="layer-label">AI Agent Code</div>
                    <div class="layer-detail">Sandboxed execution</div>
                </div>
            </div>

            <p>A user-space kernel that intercepts and implements the Linux system call interface, sitting between the sandboxed application and the host OS. Its core component, the Sentry, mediates all system calls, providing a process model while minimizing the attack surface.</p>

            <div class="strength-meter">
                <span class="strength-label">Isolation:</span>
                <div class="strength-bar"><div class="strength-fill medium-high"></div></div>
                <span class="strength-value">High</span>
            </div>

            <p><strong>Best For:</strong> Application-level sandboxing where compatibility with a wide syscall surface is required, and where VM-level performance is not a strict necessity.</p>
        </section>

        <section class="card reveal" id="nsjail">
            <h2><i class="fa-solid fa-box-open fa-icon"></i>nsjail (Process Isolation)</h2>
            
            <div class="solution-header">
                <div class="solution-icon" style="background: var(--accent-coral); color: white;"><i class="fa-solid fa-box-open"></i></div>
                <div>
                    <div class="solution-title">Linux Namespace Isolation</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Namespaces ‚Ä¢ cgroups ‚Ä¢ seccomp-bpf ‚Ä¢ Fine-grained syscall filtering</div>
                </div>
            </div>

            <div class="arch-diagram">
                <div class="arch-layer host">
                    <div class="layer-icon"><i class="fa-brands fa-linux"></i></div>
                    <div class="layer-label">Host Kernel</div>
                    <div class="layer-detail">Shared kernel</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer container">
                    <div class="layer-icon" style="color: var(--accent-orange);"><i class="fa-solid fa-layer-group"></i></div>
                    <div class="layer-label">Namespaces (UTS, PID, NET, IPC, MNT)</div>
                    <div class="layer-detail">Process isolation</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer sandbox">
                    <div class="layer-icon" style="color: var(--accent-sunflower);"><i class="fa-solid fa-shield"></i></div>
                    <div class="layer-label">seccomp-bpf + cgroups</div>
                    <div class="layer-detail">Syscall filtering ‚Ä¢ Resource limits</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: var(--accent-coral);"><i class="fa-solid fa-robot"></i></div>
                    <div class="layer-label">AI Agent Code</div>
                    <div class="layer-detail">Isolated process</div>
                </div>
            </div>

            <p>A Linux process isolation tool leveraging core kernel mechanisms: namespaces, cgroups, and seccomp-bpf for fine-grained syscall filtering. Supports multiple isolation modes and provides robust namespace isolation (UTS, mount, PID, IPC, NET, USER, CGROUPS, TIME). Filesystem constraints include chroot, pivot_root, read-only mounts, and custom /proc and tmpfs.</p>

            <div class="strength-meter">
                <span class="strength-label">Isolation:</span>
                <div class="strength-bar"><div class="strength-fill medium"></div></div>
                <span class="strength-value">Medium</span>
            </div>

            <p><strong>Best For:</strong> Production Linux environments requiring strong syscall filtering and robust process isolation for untrusted code execution.</p>
        </section>

        <section class="card reveal" id="docker">
            <h2><i class="fa-brands fa-docker fa-icon"></i>Docker with seccomp</h2>
            
            <div class="solution-header">
                <div class="solution-icon" style="background: #2196F3; color: white;"><i class="fa-brands fa-docker"></i></div>
                <div>
                    <div class="solution-title">Container-Level Security</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Default seccomp profile ‚Ä¢ 44+ blocked syscalls ‚Ä¢ High compatibility</div>
                </div>
            </div>

            <div class="arch-diagram">
                <div class="arch-layer host">
                    <div class="layer-icon"><i class="fa-brands fa-linux"></i></div>
                    <div class="layer-label">Host Kernel</div>
                    <div class="layer-detail">Shared kernel</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer container">
                    <div class="layer-icon" style="color: var(--accent-orange);"><i class="fa-brands fa-docker"></i></div>
                    <div class="layer-label">Docker Container</div>
                    <div class="layer-detail">Standard container isolation</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer sandbox">
                    <div class="layer-icon" style="color: var(--accent-sunflower);"><i class="fa-solid fa-filter"></i></div>
                    <div class="layer-label">seccomp Profile (Default)</div>
                    <div class="layer-detail">~44 high-risk syscalls blocked</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: var(--accent-coral);"><i class="fa-solid fa-robot"></i></div>
                    <div class="layer-label">AI Agent Code</div>
                    <div class="layer-detail">Containerized execution</div>
                </div>
            </div>

            <p>Docker containers use seccomp (secure computing mode) profiles to restrict the syscalls available to containerized processes. The default seccomp profile blocks about 44 high-risk syscalls out of 300+, following a compatibility-biased allowlist. Custom profiles can be specified for finer control, but the default mode prioritizes broad application compatibility over maximal security.</p>

            <div class="strength-meter">
                <span class="strength-label">Isolation:</span>
                <div class="strength-bar"><div class="strength-fill low"></div></div>
                <span class="strength-value">Low-Medium</span>
            </div>

            <p><strong>Best For:</strong> Easier setup and deployment where fine-grained control is less critical, and where the threat model is less stringent.</p>
        </section>

        <section class="card reveal" id="restrictedpython">
            <h2><i class="fa-brands fa-python fa-icon"></i>RestrictedPython</h2>
            
            <div class="solution-header">
                <div class="solution-icon" style="background: #3776AB; color: white;"><i class="fa-brands fa-python"></i></div>
                <div>
                    <div class="solution-title">Language-Level Restriction</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Python subset ‚Ä¢ Policy controls ‚Ä¢ Interpreter-level ‚Ä¢ Easily bypassed</div>
                </div>
            </div>

            <div class="arch-diagram">
                <div class="arch-layer host">
                    <div class="layer-icon"><i class="fa-solid fa-server"></i></div>
                    <div class="layer-label">Host OS</div>
                    <div class="layer-detail">Full system access</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: #3776AB;"><i class="fa-brands fa-python"></i></div>
                    <div class="layer-label">CPython Interpreter</div>
                    <div class="layer-detail">Standard Python runtime</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer sandbox">
                    <div class="layer-icon" style="color: var(--accent-sunflower);"><i class="fa-solid fa-code"></i></div>
                    <div class="layer-label">RestrictedPython Policy</div>
                    <div class="layer-detail">Restricted builtins & modules</div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer app">
                    <div class="layer-icon" style="color: var(--accent-coral);"><i class="fa-solid fa-robot"></i></div>
                    <div class="layer-label">AI Agent Code</div>
                    <div class="layer-detail">Limited Python subset</div>
                </div>
            </div>

            <p>RestrictedPython is a tool for defining a trusted subset of Python, suitable for executing untrusted code within controlled environments. It restricts access to Python builtins, attributes, and modules via policy controls. However, it is not a full sandbox system and does not defend against all possible escapes‚Äîrecent vulnerabilities (e.g., CVE-2025-22153) have demonstrated that sandbox bypass is possible.</p>

            <div class="strength-meter">
                <span class="strength-label">Isolation:</span>
                <div class="strength-bar"><div class="strength-fill very-low"></div></div>
                <span class="strength-value">Minimal</span>
            </div>

            <p><strong>Best For:</strong> Lightweight, Python-specific use cases where performance and simplicity are prioritized over strong security guarantees.</p>
        </section>

        <!-- Best Practices -->
        <section class="card reveal" id="best-practices">
            <h2><i class="fa-solid fa-list-check fa-icon"></i>Security Requirements & Best Practices</h2>
            
            <p>Recent best practices for AI agent sandboxing emphasize the following principles:</p>
            
            <ul class="feature-list">
                <li><strong>Strong isolation by default:</strong> Use microVMs (e.g., Firecracker) for untrusted code. Relax to gVisor or container-based solutions only if justified by the threat model.</li>
                <li><strong>Defense-in-depth:</strong> Layer sandboxing with runtime monitoring, approval gates, and signed artifacts.</li>
                <li><strong>Narrow agent scope:</strong> Limit the capabilities and resource access of AI agents to reduce the impact of compromise.</li>
                <li><strong>Continuous monitoring:</strong> Log all actions and resource usage, with alerting for policy violations or anomalies.</li>
                <li><strong>Rapid adaptation:</strong> Security requirements for AI sandboxes evolve quickly‚Äîsolutions must support quick updates and patching.</li>
            </ul>

            <div class="quote-box">
                <strong>Remember:</strong> Security is not binary‚Äîit's about choosing the right level of isolation for your specific threat model and operational requirements.
            </div>
        </section>

        <!-- Comparative Analysis Table -->
        <section class="card reveal" id="comparison">
            <h2><i class="fa-solid fa-scale-balanced fa-icon"></i>Comparative Analysis</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Solution</th>
                        <th>Isolation Level</th>
                        <th>Syscall Filtering</th>
                        <th>Startup</th>
                        <th>Suitability</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong><i class="fa-solid fa-fire"></i> Firecracker</strong></td>
                        <td>VM (Hardware)</td>
                        <td>Complete isolation</td>
                        <td>&lt;125ms</td>
                        <td><span class="highlight-teal">Production</span></td>
                    </tr>
                    <tr>
                        <td><strong><i class="fa-solid fa-glasses"></i> gVisor</strong></td>
                        <td>User-Space Kernel</td>
                        <td>Intercepted syscalls</td>
                        <td>Moderate</td>
                        <td>High compatibility</td>
                    </tr>
                    <tr>
                        <td><strong><i class="fa-solid fa-box-open"></i> nsjail</strong></td>
                        <td>Process + Namespace</td>
                        <td>Fine-grained (Kafel)</td>
                        <td>Fast</td>
                        <td>Linux native</td>
                    </tr>
                    <tr>
                        <td><strong><i class="fa-brands fa-docker"></i> Docker</strong></td>
                        <td>Container</td>
                        <td>Default (44 blocked)</td>
                        <td>Fast</td>
                        <td>Development</td>
                    </tr>
                    <tr>
                        <td><strong><i class="fa-brands fa-python"></i> RestrictedPython</strong></td>
                        <td>Language</td>
                        <td>Python builtins</td>
                        <td>Fast</td>
                        <td>Low-risk only</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Recommendation -->
        <section class="card reveal" id="recommendation">
            <h2><i class="fa-solid fa-trophy fa-icon"></i>Recommendation</h2>
            
            <div class="recommendation-box">
                <div class="recommendation-title"><i class="fa-solid fa-star"></i> The Best Solution for Agentic AI</div>
                
                <p>For agentic AI systems‚Äîwhere code may be generated and executed autonomously, and the risk of prompt injection, privilege escalation, or sandbox escape is high‚Äîthe industry consensus is to <strong>default to microVM-based solutions like Firecracker</strong> for the strongest isolation.</p>
                
                <p>Firecracker combines <span class="highlight-teal">VM-level security</span> with container-like speed and efficiency, supporting rapid, ephemeral sandbox creation at scale. This approach is particularly effective in multi-tenant and cloud environments.</p>
                
                <div class="solution-box">
                    <div class="solution-box-title"><i class="fa-solid fa-lightbulb"></i> Alternative Options by Use Case</div>
                    <p><i class="fa-solid fa-glasses"></i> <strong>gVisor:</strong> Best when you need broad Linux syscall compatibility without the overhead of full VMs.</p>
                    <p><i class="fa-solid fa-box-open"></i> <strong>nsjail:</strong> Ideal for Linux-native workloads with strong syscall filtering requirements.</p>
                    
                    <p><i class="fa-brands fa-docker"></i> <strong>Docker:</strong> Suitable for development, testing, and lower-risk production scenarios.</p>
                    
                    <p><i class="fa-brands fa-python"></i> <strong>RestrictedPython:</strong> Only for trusted environments where Python execution is controlled and audited.</p>
                </div>
            </div>
        </section>

        <!-- Conclusion -->
        <section class="card reveal" id="conclusion">
            <h2><i class="fa-solid fa-flag-checkered fa-icon"></i>Conclusion</h2>
            
            <p>The landscape of sandboxing for AI agents is rapidly evolving, but the best practice is clear: <span class="highlight">use the strongest isolation feasible</span> for your operational context, defaulting to microVMs like Firecracker for untrusted, autonomous code execution.</p>
            
            <div class="quote-box">
                Supplement sandboxing with defense-in-depth, monitoring, and rapid patching to keep pace with new threats. For most agentic AI deployments, this approach delivers the optimal balance of security, scalability, and operational agility.
            </div>
        </section>

        <footer>
            <p><i class="fa-solid fa-paintbrush"></i> Mind & Machine | <a href="index.html" style="color: var(--accent-teal);">Back to Home</a></p>
        </footer>
            </div>
            </main>
        </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        const revealElements = document.querySelectorAll('.reveal');
        const revealOnScroll = () => {
            revealElements.forEach(el => {
                const elementTop = el.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                if (elementTop < windowHeight - 80) {
                    el.classList.add('visible');
                }
            });
        };
        window.addEventListener('scroll', revealOnScroll);
        window.addEventListener('load', revealOnScroll);

        // Add hover effects to isolation levels
        document.querySelectorAll('.isolation-level').forEach(level => {
            level.addEventListener('mouseenter', function() {
                this.style.transform = 'translateX(8px) scale(1.02)';
            });
            level.addEventListener('mouseleave', function() {
                this.style.transform = 'translateX(0) scale(1)';
            });
        });

        // Add hover effects to arch layers
        document.querySelectorAll('.arch-layer').forEach(layer => {
            layer.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.03) rotate(-2deg)';
            });
            layer.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1) rotate(0)';
            });
        });
    </script>
</body>
</html>